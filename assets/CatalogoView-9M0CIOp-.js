import{P as C,A as m}from"./PokemonCard-XkF67kth.js";import{_,r as f,o as n,c as l,a as s,b as k,w as v,T as x,F as p,d as h,e as u,v as P,f as w,n as S,t as $,g as D,h as F,p as b,i as q}from"./index-zyj6Hai2.js";const L={components:{PokemonCard:C},created(){this.pokemon_filtrados=this.$store.state.pokemons_carregados},data(){return{next_url:"",pokemon_filtrados:[],pesquisa:"",types:[],typesSelecteds:[],showFilters:!1,order:""}},methods:{selectTypeFilter(t,e){this.typesSelecteds.includes(e)?(this.typesSelecteds=this.typesSelecteds.filter(i=>i!=e),t.srcElement.style.boxShadow="0 3px 11px rgba(0, 0, 0, 0.8)",t.srcElement.style.opacity="0.8"):(this.typesSelecteds.push(e),t.srcElement.style.boxShadow="0 3px 11px rgba(255, 255, 255, 0.8)",t.srcElement.style.opacity="1")},orderDecrescente(t,e){return console.log([t<e,t>e]),t>e?-1:t<e?1:0},orderCrescente(t,e){return t<e?-1:t>e?1:0},filterPokemon(){console.log("oi"),this.pesquisa==""&&this.typesSelecteds.length==0?this.pokemon_filtrados=this.$store.state.pokemons_carregados:this.pokemon_filtrados=this.$store.state.pokemons_carregados.filter(t=>{if(this.typesSelecteds.length==0)return!0;for(var e of t.types)if(this.typesSelecteds.includes(e.type.name))return!0;return!1}).filter(t=>this.pesquisa!=""?t.name.includes(this.pesquisa.toLowerCase()):!0)},orderPokemons(){console.log(this.order),this.order=="nomeCrescente"&&(this.pokemon_filtrados=this.pokemon_filtrados.sort((t,e)=>this.orderCrescente(t.name,e.name))),this.order=="numeroCrescente"&&(this.pokemon_filtrados=this.pokemon_filtrados.sort((t,e)=>this.orderCrescente(t.id,e.id))),this.order=="nomeDecrescente"&&(this.pokemon_filtrados=this.pokemon_filtrados.sort((t,e)=>this.orderDecrescente(t.nome,e.nome))),this.order=="numeroDecrescente"&&(this.pokemon_filtrados=this.pokemon_filtrados.sort((t,e)=>this.orderDecrescente(t.id,e.id)))},async loadPokemons(){this.$store.state.loading||(this.$store.commit("setLoading"),await m.callApi().get(this.next_url!=""?this.next_url:"/pokemon").then(t=>{this.next_url=t.data.next;for(let e of t.data.results)m.callApi().get(`/pokemon/${e.name}`).then(i=>{this.$store.commit("storePokemons",i.data),this.pokemon_filtrados=this.$store.state.pokemons_carregados}).catch(i=>{});this.$store.commit("unsetLoading")}).catch(t=>{this.$store.commit("unsetLoading")}))}},mounted(){},beforeMount(){this.$store.state.pokemons_carregados.length==0&&this.loadPokemons(),m.callApi().get("/type/").then(t=>{for(let e of t.data.results)this.types.push(e.name);this.$store.commit("unsetLoading")}).catch(t=>{this.$store.commit("unsetLoading")})}},a=t=>(b("data-v-0e13c687"),t=t(),q(),t),N={key:0,class:"filtros"},T={class:"filterBox"},V=a(()=>s("h1",null,"Pesquisa",-1)),A={class:"order"},B=a(()=>s("label",{for:""},"Ordenar por",-1)),E=a(()=>s("option",{value:"nomeCrescente"},"Nome - Crescente",-1)),I=a(()=>s("option",{value:"nomeDecrescente"},"Nome - Decrescente",-1)),M=a(()=>s("option",{value:"numeroCrescente"},"Número - Crescente",-1)),G=a(()=>s("option",{value:"numeroDecrescente"},"Número - Decrescente",-1)),U=[E,I,M,G],z={class:"gridTypes"},O=["onClick"],j={class:"grid"},H={class:"morePokemons"};function J(t,e,i,g,r,d){const c=f("PokemonCard");return n(),l(p,null,[s("button",{class:"showFilters",onClick:e[0]||(e[0]=o=>r.showFilters=!r.showFilters)},"Mostrar filtros"),k(x,null,{default:v(()=>[r.showFilters?(n(),l("div",N,[s("div",T,[V,u(s("input",{type:"text",name:"",class:"filterField","onUpdate:modelValue":e[1]||(e[1]=o=>r.pesquisa=o),id:""},null,512),[[P,r.pesquisa]])]),s("div",A,[B,u(s("select",{name:"",onChange:e[2]||(e[2]=o=>d.orderPokemons()),"onUpdate:modelValue":e[3]||(e[3]=o=>r.order=o),id:""},U,544),[[w,r.order]])]),s("div",z,[(n(!0),l(p,null,h(r.types,(o,X)=>(n(),l("div",{class:S([o,"typeFilter"]),onClick:y=>d.selectTypeFilter(y,o)},$(o.toLowerCase()),11,O))),256))]),s("button",{class:"primary-button",onClick:e[4]||(e[4]=o=>d.filterPokemon())},"Pesquisar")])):D("",!0)]),_:1}),s("div",j,[(n(!0),l(p,null,h(r.pokemon_filtrados,o=>(n(),F(c,{class:"item",pokemon:o,key:o.id},null,8,["pokemon"]))),128))]),s("div",H,[s("button",{style:{margin:"0 auto"},class:"primary-button",onClick:e[5]||(e[5]=o=>{d.loadPokemons()})},"Carregar mais Pokemons")])],64)}const K=_(L,[["render",J],["__scopeId","data-v-0e13c687"]]),Q={components:{GridPokemon:K}},R={class:"containerCatalogo"};function W(t,e,i,g,r,d){const c=f("GridPokemon");return n(),l("div",R,[k(c)])}const ee=_(Q,[["render",W],["__scopeId","data-v-5c3d84d5"]]);export{ee as default};
